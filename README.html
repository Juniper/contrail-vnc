<!DOCTYPE html>
<html lange="en">
  <head>
    <title>Contrail source code</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
    <script type="text/javascript" src="analytics.js"></script>
  </head>

  <body>
    <div class="container">
      <div class="page-header">
      <h1>Contrail source code instructions</h1>
      </div>

      <p class="lead">
	The source code for the contrail network virtualization system uses several code repositories, currently hosted in GitHub. The source code for the configuration server, control-plane, analytics and compute-node agent is located in
<a href="https://github.com/Juniper/contrail-controller">github.com/Juniper/contrail-controller</a>. The source code for the dataplane component is located in
<a href="https://github.com/Juniper/contrail-vrouter">github.com/Juniper/contrail-vrouter</a>. Several other repositories that contain build tools and code generators are also used.</p>
    </div>

    <p>
    </p>

    <div class="container">
      <p>
      In order to create a sandbox that can be used to build the
      complete system we use the <a
      href="http://code.google.com/p/git-repo">google multiple
      repository tool</a>. This requires <code>git &gt;= 1.7.2</code> to be installed in
      the build system.
      </p>

      <p>
      Before you can create a sandbox with repo you will need a github account, and you will need to set up ssh access to github.</p>
      </p>
      
      <div class="well">
	<p>
	  To create a development sandbox you can use the following steps:
	  <ul>
	    <li> mkdir &lt;dirname&gt;; cd &lt;dirname&gt; </li>
	    <li> repo init -u git@github.com:Juniper/contrail-vnc </li>
	    <li> repo sync </li>
	  </ul>
	</p>
      </div>
    </div>

    <div class="container">
      <p>
	Before building the software you will need to download other open source software libraries used by the controller repository. The script third_party/fetch_packages.py automates this process and automatically applies patches to some of these libraries.</p>

      <p>
	Contrail uses <a href="http://scons.org">SCons</a> as its build tool. Please ensure that you have scons >= 2.1.0 installed in your system and execute the command "scons" at the top-level sandbox directory.</p>
    </div>

    <div class="container">
      <p>
	The build process requires several tools including:
	<ul>
	  <li> gcc c++ >= 4.4.7 </li>
	  <li> flex </li>
	  <li> bison </li>
	  <li> xxd (included as part of the vim-common package in redhat based distributions). </li>
	  <li> libstdc++ </li>
	  <li> python development support </li>
	  <li> python lxml, setuptools, sphinx packages </li>
	  <li> openssl development support </li>
	  <li> autoconf</li>
	</ul>
      </p>
	    <p>Please report buid issues in the <a
    href=http://lists.opencontrail.org/mailman/listinfo/dev_lists.opencontrail.org">
    developers mailing list</a>.</p>

    </div>

    
    <div class="container">
    <p>On RHEL/CentOS/Scientific 6.4 the build dependencies can be
    installed by the
    following command:</p>
      <div class="well">
      yum install -y scons git python-lxml wget gcc path make unzip
    flex bison gcc-c++ openssl-devel autoconf automake vim
    python-devel python-setuptools
  </div>
      <p>
        On Ubuntu 12.04 the build dependencies can be installed by 
        the following command:
      </p>
      <div class="well">
        apt-get install -y scons git python-lxml wget gcc path make unzip
        flex bison g++ libssl-dev autoconf automake libtool pkg-config vim
        python-dev python-setuptools
	    </div>
    </div>

    <div class="container">
      <p>Common problems:
      <ul>
	<li><p>build/lib/libthriftasio.a is not generated.<p>
	<p>This library is added to thrift via a patch. It requires
      autoconf to be installed in the system in order for
      <code>configure</code> to regenerate itself.</p></li>
      </ul>
      </p>
    </div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="http://code.jquery.com/jquery.js"></script>

    <!-- Optional theme -->
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>


  </body>
</html>
